## 아이템_28

### 배열보다는 리스트를 사용하라.

배열과 제네릭 타입에는 중요한 차이가 두 가지 있다. 

- 첫 번째, 배열은 공변이다. 
  - 어려워 보이지만 뜻은 간단하다.
  - Sub 가 Super 의 하위 타입일면 배열 sub[]는 배열 Super[]의 하위 타입이 된다.(공변, 즉 함께 변한다는 뜻)
  - 반면, 제네릭은 불공변이다.
  - 즉, 서로 다른 타입 Type1, Type2 가 있을 때, List<Type1>은 List<Type2> 의 하위 입도 아니고 상위타입도 아니다.


```java
// 런타임에 실패 한다.
Object[] objectArray = new Long[1];
objectArray[0] = "타입이 달라 넣을 수 없다." ; 
```

```java
// 컴파일되지 않는다.
List<Object> ol = new ArrayList<Long>();
ol.add("타입이 달라 넣을 수 없다.");
```

어느 쪽이든 Long 용 저장소에 String 을 넣을 수 없다. 다만, 배열에서는 그 실수를 런타임에야 알게 되지만,
리스트를 사용하면 컴파일할 때 바로 알 수 있다.

- 두번째, 배열은 실체화 된다.
  - 배열은 런타임에도 자신이 담기로 한 원소의 타입을 인지하고 확인한다.





---

## 마무리

배열과 제네릭에는 매우 다른 타입 규칙이 적용된다.

배열은 공변이고 실체화되는 반면, 제네릭은 불공변이고 타입정보가 소거된다.

그 결과 배열은 런타임에는 타입 안전하지만 컴파일타임에는 그렇지 않다. 제네릭은 반대다.

그래서 둘은 섞어 쓰기란 쉽지 않다.

둘을 섞어 쓰다가 컴파일 오류나 경고를 만나면, 가장 먼저 배열을 리스트로 대체하는 방법을 적용해보자.

